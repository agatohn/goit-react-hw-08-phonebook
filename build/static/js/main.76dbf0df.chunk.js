(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{11:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return h}));var r=n(4),c=n(7),a=n(35),o=n.n(a),s=n(58),u=n(24),i=n.n(u);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var l,d=function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){i.a.defaults.headers.common.Authorization=""},j=Object(c.c)("auth/register",function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/signup",t);case 4:return c=e.sent,a=c.data,d(a.token),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(c.c)("auth/login",function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/login",t);case 4:return c=e.sent,a=c.data,d(a.token),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(c.c)("auth/logout",function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/logout");case 4:b(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(c.c)("auth/refresh",function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,c,a,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,c=n.getState,a=c(),null!==(s=a.auth.token)){e.next=5;break}return e.abrupt("return",r());case 5:return d(s),e.prev=6,e.next=9,i.a.get("/users/current");case 9:return u=e.sent,l=u.data,e.abrupt("return",l);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",r(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),h={register:j,logOut:O,logIn:f,refreshCurrentUser:g},p=Object(c.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshingUser:!1,error:null},extraReducers:(l={},Object(r.a)(l,h.register.pending,(function(e){e.error=null})),Object(r.a)(l,h.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(r.a)(l,h.register.rejected,(function(e,t){e.error=t.payload})),Object(r.a)(l,h.logIn.pending,(function(e){e.error=null})),Object(r.a)(l,h.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(r.a)(l,h.logIn.rejected,(function(e,t){e.error=t.payload})),Object(r.a)(l,h.logOut.pending,(function(e){e.error=null})),Object(r.a)(l,h.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.isRefreshingUser=!1})),Object(r.a)(l,h.logOut.rejected,(function(e,t){e.error=t.payload})),Object(r.a)(l,h.refreshCurrentUser.pending,(function(e){e.isRefreshingUser=!0})),Object(r.a)(l,h.refreshCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isRefreshingUser=!1})),Object(r.a)(l,h.refreshCurrentUser.rejected,(function(e){e.isRefreshingUser=!1})),l)}).reducer,v={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsRefreshingUser:function(e){return e.auth.isRefreshingUser}}},165:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(38),o=n.n(a),s=n(31),u=n(13),i=n(7),l=n(36),d=n(95),b=n.n(d),j=n(83),f=n(11),O={key:"auth",storage:b.a,whitelist:["token"]},g=Object(i.a)({reducer:{auth:Object(l.g)(O,f.b),contacts:j.c},middleware:function(e){return e({serializableCheck:{ignoredActions:[l.a,l.f,l.b,l.c,l.d,l.e]}})},devTools:!1}),h=Object(l.h)(g),p=n(96),v=n(49),C=n(71),x=n(8),m=n(1),y=["children","restricted","redirectTo"];function k(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,o=Object(C.a)(e,y),s=Object(u.c)(f.c.getIsLoggedIn)&&r;return Object(m.jsx)(x.b,Object(v.a)(Object(v.a)({},o),{},{children:s?Object(m.jsx)(x.a,{to:a}):t}))}var N=["children","redirectTo"];function S(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(C.a)(e,N),a=Object(u.c)(f.c.getIsLoggedIn);return Object(m.jsx)(x.b,Object(v.a)(Object(v.a)({},c),{},{children:a?t:Object(m.jsx)(x.a,{to:r})}))}var I=n(59),R=n.n(I),_=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.b,{className:R.a.nav,activeClassName:R.a.activeNav,to:"/register",exact:!0,children:"Sign Up"}),Object(m.jsx)(s.b,{className:R.a.nav,activeClassName:R.a.activeNav,to:"/login",exact:!0,children:"Sign In"})]})},w=n(60),E=n.n(w),L=function(){var e=Object(u.c)(f.c.getIsLoggedIn);return Object(m.jsxs)("nav",{children:[Object(m.jsx)(s.b,{className:E.a.nav,activeClassName:E.a.activeNav,to:"/",exact:!0,children:"Home"}),e&&Object(m.jsx)(s.b,{className:E.a.nav,activeClassName:E.a.activeNav,to:"/phonebook",exact:!0,children:"Phonebook"})]})},U=n(201),q=n(72),F=n.n(q),T=function(){var e=Object(u.b)(),t=Object(u.c)(f.c.getUserName);return Object(m.jsxs)("div",{className:F.a.userWrapper,children:[Object(m.jsxs)("span",{className:F.a.userName,children:["Log in as: ",t]}),Object(m.jsx)(U.a,{color:"secondary",variant:"contained",size:"small",className:F.a.logBtn,type:"button",onClick:function(){e(f.a.logOut())},children:"logout"})]})},W=n(204),z=n(197),B=n(205),A=n(102),P=n(203);function V(){var e=Object(u.c)(f.c.getIsLoggedIn),t=Object(A.a)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(P.a,{theme:t,children:[Object(m.jsx)(z.a,{}),Object(m.jsx)(W.a,{position:"static",color:"default",elevation:0,sx:{borderBottom:function(e){return"1px solid ".concat(e.palette.divider)}},children:Object(m.jsxs)(B.a,{sx:{flexWrap:"wrap",justifyContent:"space-between"},children:[Object(m.jsx)(L,{})," ",e?Object(m.jsx)(T,{}):Object(m.jsx)(_,{})]})})]})})}var M=n(101),J=n.n(M),X=(n(164),Object(r.lazy)((function(){return n.e(6).then(n.bind(null,273))}))),D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,276))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,277))})),K=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,272))}));function Y(){var e=Object(u.b)(),t=Object(u.c)(f.c.getIsRefreshingUser);return Object(r.useEffect)((function(){e(f.a.refreshCurrentUser())}),[e]),!t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(V,{}),Object(m.jsx)(x.d,{children:Object(m.jsxs)(r.Suspense,{fallback:Object(m.jsx)("div",{children:Object(m.jsx)(J.a,{className:"Loader",type:"ThreeDots",color:"#00BFFF",height:20,width:100,timeout:3e3})}),children:[Object(m.jsx)(k,{exact:!0,path:"/",children:Object(m.jsx)(X,{})}),Object(m.jsx)(k,{path:"/register",restricted:!0,children:Object(m.jsx)(D,{})}),Object(m.jsx)(k,{path:"/login",restricted:!0,redirectTo:"/phonebook",children:Object(m.jsx)(H,{})}),Object(m.jsx)(S,{path:"/phonebook",restricted:!0,redirectTo:"/login",children:Object(m.jsx)(K,{})})]})})]})}o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(u.a,{store:g,children:Object(m.jsx)(p.a,{loading:null,persistor:h,children:Object(m.jsx)(s.a,{children:Object(m.jsx)(Y,{})})})})}),document.getElementById("root"))},59:function(e,t,n){e.exports={nav:"AuthNavigation_nav__PXa_x",activeNav:"AuthNavigation_activeNav__2h5av"}},60:function(e,t,n){e.exports={nav:"Navigation_nav__1XtRS",activeNav:"Navigation_activeNav__2Y6gK"}},72:function(e,t,n){e.exports={userWrapper:"Menu_userWrapper__2T7kl",userName:"Menu_userName__CEOEd",logBtn:"Menu_logBtn__1x3ZW"}},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return k}));var r,c,a,o=n(7),s={getContactsRequest:Object(o.b)("contacts/getContactsRequest"),getContactsSuccess:Object(o.b)("contacts/getContactsSuccess"),getContactsError:Object(o.b)("contacts/getContactsError"),addContactRequest:Object(o.b)("contacts/addContactRequest"),addContactSuccess:Object(o.b)("contacts/addContactSuccess"),addContactError:Object(o.b)("contacts/addContactError"),deleteContactRequest:Object(o.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(o.b)("contacts/deleteContactSuccess"),deleteContactError:Object(o.b)("contacts/deleteContactError"),changeFilter:Object(o.b)("contacts/filter")},u=n(63),i=function(e){return e.contacts.contacts},l=function(e){return e.contacts.filter},d=Object(u.a)([i,l],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),b={getContacts:i,getFilter:l,getVisibleContacts:d},j=n(24),f=n.n(j),O={getContact:function(){return function(e){e(s.getContactsRequest()),f.a.get("/contacts").then((function(t){var n=t.data;return e(s.getContactsSuccess(n))})).catch((function(t){return e(s.getContactsError(t))}))}},addContact:function(e){var t=e.name,n=e.number;return function(e,r){var c={name:t,number:n},a=r().contacts.contacts;if(null===a||void 0===a?void 0:a.some((function(e){return e.name.toLocaleLowerCase()===t.toLocaleLowerCase()||a.some((function(e){return e.number===n}))})))return e(s.addContactError("Name: ".concat(t," or number: ").concat(n," is alredy exist")));e(s.addContactRequest()),f.a.post("/contacts",c).then((function(t){var n=t.data;return e(s.addContactSuccess(n))})).catch((function(t){return e(s.addContactError(t))}))}},deleteContact:function(e){return function(t){t(s.deleteContactRequest()),f.a.delete("/contacts/".concat(e)).then((function(){return t(s.deleteContactSuccess(e))})).catch((function(e){return t(s.deleteContactError(e))}))}}},g=n(4),h=n(28),p=n(15),v=n(11),C=Object(o.d)([],(r={},Object(g.a)(r,s.getContactsSuccess,(function(e,t){return t.payload})),Object(g.a)(r,s.addContactSuccess,(function(e,t){var n=t.payload;return[].concat(Object(h.a)(e),[n])})),Object(g.a)(r,s.addContactError,(function(e,t){var n=t.payload;return alert(n)})),Object(g.a)(r,s.deleteContactSuccess,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(g.a)(r,v.a.logOut.fulfilled,(function(){return[]})),r)),x=Object(o.d)("",Object(g.a)({},s.changeFilter,(function(e,t){return t.payload}))),m=Object(o.d)(!1,(c={},Object(g.a)(c,s.getContactsRequest,(function(){return!0})),Object(g.a)(c,s.getContactsSuccess,(function(){return!1})),Object(g.a)(c,s.getContactsError,(function(){return!1})),Object(g.a)(c,s.addContactRequest,(function(){return!0})),Object(g.a)(c,s.addContactSuccess,(function(){return!1})),Object(g.a)(c,s.addContactError,(function(){return!1})),Object(g.a)(c,s.deleteContactRequest,(function(){return!0})),Object(g.a)(c,s.deleteContactSuccess,(function(){return!1})),Object(g.a)(c,s.deleteContactError,(function(){return!1})),c)),y=Object(o.d)(null,(a={},Object(g.a)(a,s.getContactsError,(function(e,t){return t.payload})),Object(g.a)(a,s.addContactError,(function(e,t){return t.payload})),Object(g.a)(a,s.deleteContactError,(function(e,t){return t.payload})),Object(g.a)(a,s.getContactsSuccess,(function(){return null})),Object(g.a)(a,s.addContactSuccess,(function(){return null})),Object(g.a)(a,s.deleteContactSuccess,(function(){return null})),a)),k=Object(p.b)({contacts:C,filter:x,loading:m,error:y})}},[[165,3,4]]]);
//# sourceMappingURL=main.76dbf0df.chunk.js.map